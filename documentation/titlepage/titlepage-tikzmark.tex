% arara: pdflatex
% arara: pdflatex
\documentclass[11pt]{article}
\usepackage{listingsutf8}
\usepackage[margin=1cm]{geometry}
\usepackage{tikz}
\usetikzlibrary{calc}
\newcommand{\tikzmark}[1]{%
  \tikz[overlay,remember picture] \node[text=black,
    inner sep=2pt] (#1) {};}
\begin{document}
\pagestyle{empty}
\pagecolor{black}
\begin{lstlisting}[escapeinside={(*@}{@*)},basicstyle=\ttfamily]
(*@\tikzmark{linebegin1}@*)\NewDocumentCommand{\announce}{ s m s m }{%(*@\tikzmark{linebegin88}@*)
  (*@\tikzmark{linebegin2}@*)\IfBooleanTF{#1}%(*@\tikzmark{linebegin87}@*)
  (*@\tikzmark{linebegin3}@*){% \announce*(*@\tikzmark{linebegin86}@*)
    (*@\tikzmark{linebegin4}@*)\tcbdocmarginnote(*@\tikzmark{linebegin85}@*)
    (*@\tikzmark{linebegin5}@*)\IfBooleanTF{#3}%(*@\tikzmark{linebegin84}@*)
    (*@\tikzmark{linebegin6}@*){% \announce*{date}*[text] means *updated* as of <date>(*@\tikzmark{linebegin83}@*)
      (*@\tikzmark{linebegin7}@*)\tcbdocupdated{#2}%(*@\tikzmark{linebegin82}@*)
    (*@\tikzmark{linebegin8}@*)}%(*@\tikzmark{linebegin81}@*)
    (*@\tikzmark{linebegin9}@*){% \announce*{date}[text] means *new* as of <date>(*@\tikzmark{linebegin80}@*)
      (*@\tikzmark{linebegin10}@*)\tcbdocnew{#2}%(*@\tikzmark{linebegin79}@*)
    (*@\tikzmark{linebegin11}@*)}%(*@\tikzmark{linebegin78}@*)
  (*@\tikzmark{linebegin12}@*)}%(*@\tikzmark{linebegin77}@*)
  (*@\tikzmark{linebegin13}@*)\IfBooleanTF{#3}%(*@\tikzmark{linebegin76}@*)
  (*@\tikzmark{linebegin14}@*){%(*@\tikzmark{linebegin75}@*)
    (*@\tikzmark{linebegin15}@*)\addcontentsline{new}{cmhtitle}{#4 (U)}%(*@\tikzmark{linebegin74}@*)
  (*@\tikzmark{linebegin16}@*)}%(*@\tikzmark{linebegin73}@*)
  (*@\tikzmark{linebegin17}@*){%(*@\tikzmark{linebegin72}@*)
    (*@\tikzmark{linebegin18}@*)\addcontentsline{new}{cmhtitle}{#4 (N)}%(*@\tikzmark{linebegin71}@*)
  (*@\tikzmark{linebegin19}@*)}%(*@\tikzmark{linebegin70}@*)
(*@\tikzmark{linebegin20}@*)}%(*@\tikzmark{linebegin69}@*)
(*@\tikzmark{linebegin21}@*){% \announce(*@\tikzmark{linebegin68}@*)
  (*@\tikzmark{linebegin22}@*)\tcbdocmarginnote{%(*@\tikzmark{linebegin67}@*)
    (*@\tikzmark{linebegin23}@*)\IfBooleanTF{#3}%(*@\tikzmark{linebegin66}@*)
    (*@\tikzmark{linebegin24}@*){% \announce{date}*[text] means *updated* as of <date>(*@\tikzmark{linebegin65}@*)
      (*@\tikzmark{linebegin25}@*)\tcbdocupdated{#2}%(*@\tikzmark{linebegin64}@*)
    (*@\tikzmark{linebegin26}@*)}%(*@\tikzmark{linebegin63}@*)
    (*@\tikzmark{linebegin27}@*){% \announce{date}[text] means *new* as of <date>(*@\tikzmark{linebegin62}@*)
      (*@\tikzmark{linebegin28}@*)\tcbdocnew{#2}%(*@\tikzmark{linebegin61}@*)
    (*@\tikzmark{linebegin29}@*)}%(*@\tikzmark{linebegin60}@*)
  (*@\tikzmark{linebegin30}@*)}%(*@\tikzmark{linebegin59}@*)
(*@\tikzmark{linebegin31}@*)}}(*@\tikzmark{linebegin58}@*)
(*@\tikzmark{linebegin32}@*)\ifnum\x(*@\tikzmark{linebegin57}@*)
  (*@\tikzmark{linebegin33}@*)something(*@\tikzmark{linebegin56}@*)
(*@\tikzmark{linebegin34}@*)\else(*@\tikzmark{linebegin55}@*)
  (*@\tikzmark{linebegin35}@*)something(*@\tikzmark{linebegin54}@*)
(*@\tikzmark{linebegin36}@*)\fi(*@\tikzmark{linebegin53}@*)
(*@\tikzmark{linebegin37}@*)\begin{itemize}(*@\tikzmark{linebegin52}@*)
  (*@\tikzmark{linebegin38}@*)\item item text item text item text item text(*@\tikzmark{linebegin51}@*)
        (*@\tikzmark{linebegin39}@*)item text item text item text item text(*@\tikzmark{linebegin50}@*)
        (*@\tikzmark{linebegin40}@*)item text item text item text item text(*@\tikzmark{linebegin49}@*)
  (*@\tikzmark{linebegin41}@*)\item item text item text item text item text(*@\tikzmark{linebegin48}@*)
        (*@\tikzmark{linebegin42}@*)item text item text item text item text(*@\tikzmark{linebegin47}@*)
        (*@\tikzmark{linebegin43}@*)item text item text item text item text(*@\tikzmark{linebegin46}@*)
(*@\tikzmark{linebegin44}@*)\end{itemize}(*@\tikzmark{linebegin45}@*)
\end{lstlisting}
\begin{tikzpicture}[overlay,remember picture]
	\draw[opacity=0.75,fill=black!50!white,draw=white,rounded corners=.5ex,line width=3pt]
($(linebegin1)+(0ex,-1ex)$)
-| ($(linebegin2)+(0ex,-1ex)$)
-| ($(linebegin3)+(0ex,-1ex)$)
-| ($(linebegin4)+(0ex,-1ex)$)
-| ($(linebegin5)+(0ex,-1ex)$)
-| ($(linebegin6)+(0ex,-1ex)$)
-| ($(linebegin7)+(0ex,-1ex)$)
-| ($(linebegin8)+(0ex,-1ex)$)
-| ($(linebegin9)+(0ex,-1ex)$)
-| ($(linebegin10)+(0ex,-1ex)$)
-| ($(linebegin11)+(0ex,-1ex)$)
-| ($(linebegin12)+(0ex,-1ex)$)
-| ($(linebegin13)+(0ex,-1ex)$)
-| ($(linebegin14)+(0ex,-1ex)$)
-| ($(linebegin15)+(0ex,-1ex)$)
-| ($(linebegin16)+(0ex,-1ex)$)
-| ($(linebegin17)+(0ex,-1ex)$)
-| ($(linebegin18)+(0ex,-1ex)$)
-| ($(linebegin19)+(0ex,-1ex)$)
-| ($(linebegin20)+(0ex,-1ex)$)
-| ($(linebegin21)+(0ex,-1ex)$)
-| ($(linebegin22)+(0ex,-1ex)$)
-| ($(linebegin23)+(0ex,-1ex)$)
-| ($(linebegin24)+(0ex,-1ex)$)
-| ($(linebegin25)+(0ex,-1ex)$)
-| ($(linebegin26)+(0ex,-1ex)$)
-| ($(linebegin27)+(0ex,-1ex)$)
-| ($(linebegin28)+(0ex,-1ex)$)
-| ($(linebegin29)+(0ex,-1ex)$)
-| ($(linebegin30)+(0ex,-1ex)$)
-| ($(linebegin31)+(0ex,-1ex)$)
-| ($(linebegin32)+(0ex,-1ex)$)
-| ($(linebegin33)+(0ex,-1ex)$)
-| ($(linebegin34)+(0ex,-1ex)$)
-| ($(linebegin35)+(0ex,-1ex)$)
-| ($(linebegin36)+(0ex,-1ex)$)
-| ($(linebegin37)+(0ex,-1ex)$)
-| ($(linebegin38)+(0ex,-1ex)$)
-| ($(linebegin39)+(0ex,-1ex)$)
-| ($(linebegin40)+(0ex,-1ex)$)
-| ($(linebegin41)+(0ex,-1ex)$)
-| ($(linebegin42)+(0ex,-1ex)$)
-| ($(linebegin43)+(0ex,-1ex)$)
-| ($(linebegin44)+(0ex,-1ex)$)
-- ($(linebegin45)+(0ex,-1ex)$)
|- ($(linebegin46)+(0ex,-1ex)$)
|- ($(linebegin47)+(0ex,-1ex)$)
|- ($(linebegin48)+(0ex,-1ex)$)
|- ($(linebegin49)+(0ex,-1ex)$)
|- ($(linebegin50)+(0ex,-1ex)$)
|- ($(linebegin51)+(0ex,-1ex)$)
|- ($(linebegin52)+(0ex,-1ex)$)
|- ($(linebegin53)+(0ex,-1ex)$)
|- ($(linebegin54)+(0ex,-1ex)$)
|- ($(linebegin55)+(0ex,-1ex)$)
|- ($(linebegin56)+(0ex,-1ex)$)
|- ($(linebegin57)+(0ex,-1ex)$)
|- ($(linebegin58)+(0ex,-1ex)$)
|- ($(linebegin59)+(0ex,-1ex)$)
|- ($(linebegin60)+(0ex,-1ex)$)
|- ($(linebegin61)+(0ex,-1ex)$)
|- ($(linebegin62)+(0ex,-1ex)$)
|- ($(linebegin63)+(0ex,-1ex)$)
|- ($(linebegin64)+(0ex,-1ex)$)
|- ($(linebegin65)+(0ex,-1ex)$)
|- ($(linebegin66)+(0ex,-1ex)$)
|- ($(linebegin67)+(0ex,-1ex)$)
|- ($(linebegin68)+(0ex,-1ex)$)
|- ($(linebegin69)+(0ex,-1ex)$)
|- ($(linebegin70)+(0ex,-1ex)$)
|- ($(linebegin71)+(0ex,-1ex)$)
|- ($(linebegin72)+(0ex,-1ex)$)
|- ($(linebegin73)+(0ex,-1ex)$)
|- ($(linebegin74)+(0ex,-1ex)$)
|- ($(linebegin75)+(0ex,-1ex)$)
|- ($(linebegin76)+(0ex,-1ex)$)
|- ($(linebegin77)+(0ex,-1ex)$)
|- ($(linebegin78)+(0ex,-1ex)$)
|- ($(linebegin79)+(0ex,-1ex)$)
|- ($(linebegin80)+(0ex,-1ex)$)
|- ($(linebegin81)+(0ex,-1ex)$)
|- ($(linebegin82)+(0ex,-1ex)$)
|- ($(linebegin83)+(0ex,-1ex)$)
|- ($(linebegin84)+(0ex,-1ex)$)
|- ($(linebegin85)+(0ex,-1ex)$)
|- ($(linebegin86)+(0ex,-1ex)$)
|- ($(linebegin87)+(0ex,-1ex)$)
|- ($(linebegin88)+(0ex,-1ex)$)
|- ($(linebegin88)+(0ex,1ex)$)
|- ($(linebegin1)+(0ex,2ex)$)
-- ($(linebegin1)+(0ex,-1ex)$);
\end{tikzpicture}
\end{document}
